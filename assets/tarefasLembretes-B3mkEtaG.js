import{r as p,o as k,L as q,M as S,N as s,O as a,at as B,au as v,Z as b,R as D,ai as x,av as _,W as r}from"./index-0G6laB72.js";import{b as A,a as z,Q as P}from"./QTable-rsOKkrq6.js";import{Q as j}from"./QPage-CNCivavz.js";import{a as L,u as N}from"./use-quasar-BZ98rS4_.js";import"./QItem-D4dDIa40.js";import"./format-DKutiZY7.js";import"./axios-B_u4E_xz.js";function U(){const{listar:y,inserir:n,atualizar:u,excluir:c,getById:d}=L("tarefas");return{listar:y,inserir:n,atualizar:u,excluir:c,getById:d}}const Z={__name:"tarefasLembretes",setup(y){const{listar:n,inserir:u,atualizar:c,excluir:d}=U(),g=p([]),e=p({titulo:"",descricao:"",status:"Pendente"}),o=N(),w=[{name:"titulo",label:"Título",align:"left",field:"titulo"},{name:"descricao",label:"Descrição",align:"left",field:"descricao"},{name:"status",label:"Status",align:"left",field:"status"},{name:"acoes",label:"Ações",align:"center"}],C=p(new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"}));async function m(){g.value=await n()}function T(i){e.value={...i}}function f(){e.value={titulo:"",descricao:"",status:"Pendente"}}async function Q(){e.value.id?await c(e.value):await u(e.value),o.notify({type:"positive",message:"Tarefa Salva com sucesso"}),f(),m()}async function V(i){o.dialog({title:"Confirmar",message:"Tem certeza que deseja excluir a tarefa?",cancel:!0,persistente:!0}).onOk(async()=>{await d(i),f(),m(),o.notify({type:"positive",message:"Tarefa excluida com sucesso?"})}).onCancel(()=>{o.notify({type:"info",message:"Cancelado pelo usuario"})})}return k(()=>{m()}),(i,t)=>(S(),q(j,{class:"q-pa-md row justify-center"},{default:s(()=>[a(B,{class:"q-pa-sm",style:{width:"400px"},bordered:""},{default:s(()=>[a(v,{class:"text-h5 q-mb-md flex flex-center",elevated:""},{default:s(()=>[t[4]||(t[4]=b("div",null,"Tarefa Atual",-1)),b("div",null,D(C.value),1)]),_:1}),a(v,{class:"q-gutter-sm"},{default:s(()=>[a(x,{modelValue:e.value.titulo,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.titulo=l),name:"titulo",type:"text",placeholder:"Titulo",dense:""},null,8,["modelValue"]),a(x,{modelValue:e.value.descricao,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.descricao=l),name:"descricao",type:"text",placeholder:"Descricao",dense:""},null,8,["modelValue"]),a(A,{modelValue:e.value.status,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.status=l),options:["Pendente","Concluída"],label:"Status",dense:"","emit-value":"","map-options":""},null,8,["modelValue"])]),_:1}),a(_,{align:"center"},{default:s(()=>[a(r,{flat:"",icon:"cancel",label:"",color:"primary",onClick:f}),a(r,{name:"salvar",color:"primary",icon:"save",disable:!e.value.titulo,onClick:Q},null,8,["disable"]),a(r,{name:"excluir",icon:"delete",color:"negative",disable:!e.value.titulo,onClick:t[3]||(t[3]=l=>V(e.value.id))},null,8,["disable"])]),_:1})]),_:1}),a(v,{class:"q-gutter-sm"},{default:s(()=>[a(z,{title:"Histórico de Tarefas Diárias",rows:g.value,columns:w,"row-key":"id"},{"body-cell-acoes":s(l=>[a(P,{props:l,class:"q-gutter-sm"},{default:s(()=>[a(r,{icon:"visibility",label:"Selecionar",color:"primary",dense:"",size:"sm",onClick:$=>T(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1}))}};export{Z as default};
